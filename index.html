<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Free MCA Lead Finder</title>
<style>
  body{font-family:Inter,Arial, sans-serif;background:#0f1724;color:#e6e6e6;margin:0;padding:0;display:flex;align-items:center;justify-content:center;height:100vh}
  .card{width:960px;max-width:96%;background:#081126;border:1px solid #16243a;padding:28px;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.5)}
  h1{margin:0 0 8px;font-size:20px;color:#ffd166}
  p.small{margin:0 0 18px;color:#9fb0c8}
  .row{display:flex;gap:12px}
  input[type="text"]{flex:1;padding:12px;border-radius:8px;border:1px solid #213142;background:#021225;color:#e6efff}
  button{padding:12px 18px;border-radius:8px;border:none;background:#ffd166;color:#07122b;font-weight:600;cursor:pointer}
  .results{margin-top:18px;max-height:48vh;overflow:auto;border-top:1px dashed #213142;padding-top:12px}
  .lead{padding:12px;border-radius:8px;background:linear-gradient(180deg,#071426,#041524);margin-bottom:12px;border:1px solid #122436}
  .meta{color:#9fb0c8;font-size:13px}
  .smallnote{font-size:12px;color:#8aa3bb;margin-top:8px}
</style>
</head>
<body>
  <div class="card">
    <h1>Free MCA Lead Finder</h1>
    <p class="small">Find public pages mentioning merchant cash advance, UCC filings, or businesses openly seeking funding. Free · No signup.</p>

    <div class="row">
      <input id="query" type="text" placeholder="Search keywords (e.g. 'seeking funding', 'merchant cash advance', 'UCC-1', 'seeking MCA')" />
      <button id="go">Search</button>
    </div>

    <div class="smallnote">Tip: try keywords like <em>"seeking funding"</em>, <em>"merchant cash advance"</em>, <em>"UCC-1"</em>, or company names.</div>

    <div class="results" id="results"></div>
  </div>

<script>
const resultsEl = document.getElementById('results');
document.getElementById('go').addEventListener('click', doSearch);
document.getElementById('query').addEventListener('keydown', (e)=>{ if(e.key==='Enter') doSearch() });

async function doSearch(){
  const q = document.getElementById('query').value.trim();
  if(!q){ alert('Type keywords to search'); return; }
  resultsEl.innerHTML = '<div class="meta">Searching… this will call free search APIs (may be rate limited)</div>';
  try{
    const res = await fetch('/api/search?q='+encodeURIComponent(q), { method:'GET' });
    if(!res.ok){ const t=await res.text(); resultsEl.innerHTML = `<div class="meta">Error: ${res.status} ${t}</div>`; return; }
    const json = await res.json();
    if(!json.items || json.items.length===0) resultsEl.innerHTML = '<div class="meta">No leads found.</div>';
    else {
      resultsEl.innerHTML = '';
      for(const it of json.items){
        const div = document.createElement('div');
        div.className = 'lead';
        div.innerHTML = `<div style="font-weight:600"><a href="${it.url}" target="_blank" style="color:#ffd166;text-decoration:none">${escapeHtml(it.title||it.url)}</a></div>
          <div class="meta">${escapeHtml(it.snippet||'')}</div>
          <div class="meta" style="margin-top:8px">Source: ${escapeHtml(it.source||'web')}</div>`;
        resultsEl.appendChild(div);
      }
    }
  }catch(err){
    resultsEl.innerHTML = `<div class="meta">Error: ${err.message}</div>`;
  }
}

function escapeHtml(s){ if(!s) return ''; return s.replace(/[&<>"']/g, (m)=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' })[m]); }
</script>
</body>
</html>
